import {
  loc,
  parse
} from "./chunk-F2H7FI4S.js";
import "./chunk-CNG6RZGH.js";
import "./chunk-JVT5KKWY.js";
import "./chunk-X7HCJ7ZS.js";
import "./chunk-OYPXSR5U.js";
import "./chunk-RTEQQXGT.js";

// node_modules/svelte-spa-router/active.js
var nodes = [];
var location;
function checkActive(el) {
  const matchesLocation = el.pattern.test(location);
  toggleClasses(el, el.className, matchesLocation);
  toggleClasses(el, el.inactiveClassName, !matchesLocation);
}
function toggleClasses(el, className, shouldAdd) {
  (className || "").split(" ").forEach((cls) => {
    if (!cls) {
      return;
    }
    el.node.classList.remove(cls);
    if (shouldAdd) {
      el.node.classList.add(cls);
    }
  });
}
loc.subscribe((value) => {
  location = value.location + (value.querystring ? "?" + value.querystring : "");
  nodes.map(checkActive);
});
function active(node, opts) {
  if (opts && (typeof opts == "string" || typeof opts == "object" && opts instanceof RegExp)) {
    opts = {
      path: opts
    };
  } else {
    opts = opts || {};
  }
  if (!opts.path && node.hasAttribute("href")) {
    opts.path = node.getAttribute("href");
    if (opts.path && opts.path.length > 1 && opts.path.charAt(0) == "#") {
      opts.path = opts.path.substring(1);
    }
  }
  if (!opts.className) {
    opts.className = "active";
  }
  if (!opts.path || typeof opts.path == "string" && (opts.path.length < 1 || opts.path.charAt(0) != "/" && opts.path.charAt(0) != "*")) {
    throw Error('Invalid value for "path" argument');
  }
  const { pattern } = typeof opts.path == "string" ? parse(opts.path) : { pattern: opts.path };
  const el = {
    node,
    className: opts.className,
    inactiveClassName: opts.inactiveClassName,
    pattern
  };
  nodes.push(el);
  checkActive(el);
  return {
    // When the element is destroyed, remove it from the list
    destroy() {
      nodes.splice(nodes.indexOf(el), 1);
    }
  };
}
export {
  active as default
};
//# sourceMappingURL=svelte-spa-router_active.js.map
